# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ - 2D Level Editor

**üìö –ù–∞–≤–∏–≥–∞—Ü–∏—è:**
- [ARCHITECTURE.md](./ARCHITECTURE.md) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [API_GUIDE.md](./API_GUIDE.md) - API –º–µ—Ç–æ–¥—ã
- [TOUCH_SUPPORT.md](./TOUCH_SUPPORT.md) - —Ç–∞—á-—Å–æ–±—ã—Ç–∏—è
- [COMMON_MISTAKES.md](./COMMON_MISTAKES.md) - —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û –î–õ–Ø –ê–ì–ï–ù–¢–ê

**–ü–ï–†–ï–î –î–û–ë–ê–í–õ–ï–ù–ò–ï–ú –õ–Æ–ë–û–ì–û –ö–û–î–ê:**
1. **–ü—Ä–æ—á–∏—Ç–∞–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** - –æ—Å–æ–±–µ–Ω–Ω–æ [ARCHITECTURE.md](./ARCHITECTURE.md), [API_GUIDE.md](./API_GUIDE.md) –∏ [COMMON_MISTAKES.md](./COMMON_MISTAKES.md)
2. **–ü—Ä–æ–≤–µ—Ä—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–π –≥–æ—Ç–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (BaseDialog, UIFactory, Logger)
3. **–ò–∑—É—á–∏ –ø–æ—Ö–æ–∂–∏–π –∫–æ–¥** - –Ω–∞–π–¥–∏ –ø—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
4. **–°–ª–µ–¥—É–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ** - –Ω–µ –¥—É–±–ª–∏—Ä—É–π –∫–æ–¥, –∏—Å–ø–æ–ª—å–∑—É–π —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

**–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π:**
- ‚úÖ `Logger.category.method()` –≤–º–µ—Å—Ç–æ `console.log()`
- ‚úÖ `stateManager` –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ `eventHandlerManager` –¥–ª—è —Å–æ–±—ã—Ç–∏–π
- ‚úÖ `BaseDialog` –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
- ‚úÖ `UIFactory` –¥–ª—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ª–∞–π:**
- ‚ùå –ù–µ –ø—Ä–æ–≤–µ—Ä—è–π `if (!stateManager)` - –¥–æ–≤–µ—Ä—è–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- ‚ùå –ù–µ —Å–æ–∑–¥–∞–≤–∞–π –Ω–æ–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏ –±–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –æ—Ç BaseDialog
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä—è–º—ã–µ addEventListener
- ‚ùå –ù–µ –¥—É–±–ª–∏—Ä—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

## ü§ñ –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∞–≥–µ–Ω—Ç–∞

### –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞:
```javascript
const obj = levelEditor.createObject('player', 100, 200, { name: 'Player' });
levelEditor.selectObject(obj.id);
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:
```javascript
stateManager.set('selectedObject', obj);
const selected = stateManager.get('selectedObject');
stateManager.subscribe('selectedObject', (newObj) => console.log('Selected:', newObj));
```

### –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:
```javascript
configManager.set('grid.size', 32);
const gridSize = configManager.get('grid.size');
await configManager.loadAllConfigs();
```

### –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞:
```javascript
const dialog = new BaseDialog({
    id: 'my-dialog',
    title: 'My Dialog',
    contentRenderer: () => '<p>Content</p>',
    onConfirm: () => dialog.hide()
});
dialog.show();
```

### –°–æ–∑–¥–∞–Ω–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤:
```javascript
const input = UIFactory.createLabeledInput({
    label: 'Name',
    onChange: (e) => console.log(e.target.value)
});
```


### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π:
```javascript
eventManager.registerElement(button, 'button', {
    handlers: { click: this.onClick.bind(this) },
    context: this
});
```

**‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:** [COMMON_MISTAKES.md](./COMMON_MISTAKES.md)

---

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ES6 –º–æ–¥—É–ª–µ–π
- –õ–æ–∫–∞–ª—å–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥—É–ª—è–º–∏)
- –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π JavaScript

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏

**–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—Å–∏–π**: –í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–∑ **–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `LevelEditor.VERSION` –≤ —Ñ–∞–π–ª–µ `src/core/LevelEditor.js`.

```javascript
export class LevelEditor {
    static VERSION = '3.52.5'; // ‚Üê –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô –ò–°–¢–û–ß–ù–ò–ö –ò–°–¢–ò–ù–´
}
```

**–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–∞–≤–∏–ª–æ–º —Å–±—Ä–æ—Å–∞:**
- **Major (X.0.0)** - breaking changes –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- **Minor (X.Y.0)** - –Ω–æ–≤—ã–µ features, –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ
- **Patch (X.Y.Z)** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ –∏ –º–µ–ª–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ü—Ä–∞–≤–∏–ª–æ —Å–±—Ä–æ—Å–∞ –≤–µ—Ä—Å–∏–π:**
- –ü—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏ **Major** ‚Üí —Å–±—Ä–∞—Å—ã–≤–∞–µ–º Minor –∏ Patch –≤ 0
- –ü—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏ **Minor** ‚Üí —Å–±—Ä–∞—Å—ã–≤–∞–µ–º Patch –≤ 0
- **Patch** —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –º–µ–ª–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–∏:**
- –í–µ—Ä—Å–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–µ—Å—Ç–∞—Ö**: –∫–æ–Ω—Å–æ–ª–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏ header –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞
- Console –∫–æ–º–∞–Ω–¥—ã (`version`) –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–∞—é—Ç –≤–µ—Ä—Å–∏—é –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
- `package.json` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö

**–ú–µ—Å—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏:**
1. **–ö–æ–Ω—Å–æ–ª—å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ** - `üöÄ Level Editor v{VERSION} - Utility Architecture`
2. **Header –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞** - `2D Level Editor v{VERSION}` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
3. **Console –∫–æ–º–∞–Ω–¥–∞ `version`** - –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏:**
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è (Major/Minor/Patch)
2. –ò–∑–º–µ–Ω–∏—Ç–µ `LevelEditor.VERSION` –≤ `src/core/LevelEditor.js`
3. –û–±–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é –≤ `package.json` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
4. –í—Å–µ –º–µ—Å—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±–Ω–æ–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ò–∑–±–µ–≥–∞–π—Ç–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ—Ä—Å–∏–∏** –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ `LevelEditor.VERSION`.

## ‚ö†Ô∏è –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- **SettingsPanel –Ω–∞—Å–ª–µ–¥—É–µ—Ç BaseDialog** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- **stateManager –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω** —á–µ—Ä–µ–∑ `this.levelEditor.stateManager`
- **–ù–ï –¥–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** `if (!stateManager)` - —ç—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

## –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Logger

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ `Logger`. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** `console.log/error/warn` –Ω–∞–ø—Ä—è–º—É—é!

```javascript
import { Logger } from '../utils/Logger.js';

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
Logger.mouse.debug('Alt+drag detected');
Logger.preferences.error('Failed to save:', error);
Logger.layout.info('Panel resized');

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û  
console.log('Debug message');
console.error('Error message');
```

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (17 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã**:
- `Logger.duplicate` - –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- `Logger.render` - –ø—Ä–æ—Ü–µ—Å—Å—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- `Logger.ui` - UI –æ–ø–µ—Ä–∞—Ü–∏–∏
- `Logger.event` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
- `Logger.asset` - —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏
- `Logger.camera` - –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–∞–º–µ—Ä—ã

**–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ**:
- `Logger.mouse` - —Å–æ–±—ã—Ç–∏—è –º—ã—à–∏
- `Logger.state` - –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `Logger.git` - –°–∏—Å—Ç–µ–º–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `Logger.console` - —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Å–æ–ª—å—é
- `Logger.layout` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–Ω–µ–ª—è–º–∏

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**:
- `Logger.settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞  
- `Logger.preferences` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- `Logger.file` - —Ñ–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `Logger.history` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–í `src/utils/Logger.js` –Ω–∞—Å—Ç—Ä–æ–µ–Ω —É—Ä–æ–≤–µ–Ω—å `INFO`:

```javascript
static currentLevel = Logger.LEVELS.INFO; // Production –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —É—Ä–æ–≤–Ω–∏**:
- `DEBUG` (0) - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ (–æ—Ç–∫–ª—é—á–µ–Ω–æ –≤ production)
- `INFO` (1) - –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–≤–∫–ª—é—á–µ–Ω–æ)
- `WARN` (2) - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–≤–∫–ª—é—á–µ–Ω–æ)
- `ERROR` (3) - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (–≤–∫–ª—é—á–µ–Ω–æ)

### –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å:

```javascript
// –í src/utils/Logger.js –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
static currentLevel = Logger.LEVELS.DEBUG;

// –í–µ—Ä–Ω–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ –¥–ª—è production:
static currentLevel = Logger.LEVELS.INFO;
```

## –†–∞–±–æ—Ç–∞ —Å File System Access API

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

**–í–ê–ñ–ù–û**: File System Access API –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –±—Ä–∞—É–∑–µ—Ä–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ (–±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏ —Ä–µ–∫–ª–∞–º—ã, —Å—Ä–µ–¥—Å—Ç–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏). –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ExtensionErrorUtils` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç—Ç–∏–º–∏ API.

```javascript
import { ExtensionErrorUtils } from '../utils/ExtensionErrorUtils.js';

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å —Ç–∞–π–º–∞—É—Ç–æ–º –∏ fallback
const directoryHandle = await ExtensionErrorUtils.withTimeout(
    window.showDirectoryPicker({ mode: 'read' }),
    10000,
    'Directory picker'
);

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
await ExtensionErrorUtils.handleFileSystemError(
    error,
    () => this.showInputDialog(), // fallback
    { logger: Logger.ui, operation: 'Directory picker' }
);

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –±–µ–∑ –∑–∞—â–∏—Ç—ã –æ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
const directoryHandle = await window.showDirectoryPicker({ mode: 'read' });
```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –æ—à–∏–±–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

ExtensionErrorUtils –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:
- `message channel closed`
- `extension context invalidated`
- `receiving end does not exist`
- `could not establish connection`
- `timeout - possible extension conflict`

### –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è File System Access API

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–∞–π–º–∞—É—Ç—ã**:
- **Directory picker**: 10 —Å–µ–∫—É–Ω–¥
- **File picker**: 10 —Å–µ–∫—É–Ω–¥
- **File reading**: 15 —Å–µ–∫—É–Ω–¥
- **File writing**: 10 —Å–µ–∫—É–Ω–¥
- **Stream operations**: 5 —Å–µ–∫—É–Ω–¥

### Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

–ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback –º–µ—Ç–æ–¥—ã:
- **FolderPickerDialog**: fallback –Ω–∞ input dialog
- **FileUtils**: fallback –Ω–∞ download –º–µ—Ç–æ–¥
- **AssetPanel**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# Python 3
python -m http.server 8000

# Python 2
python -m SimpleHTTPServer 8000

# Node.js
npx serve .

# PHP
php -S localhost:8000
```

–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8000/index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

## –ü—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤

**–ü–†–ê–í–ò–õ–û**: –í—Å–µ –æ—Ç—á—ë—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –≤–µ–¥—É—Ç—Å—è –≤ –ø–∞–ø–∫–µ `./tmp/reports`. –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ –æ—Ç—á—ë—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –æ—Ç—Ä–∞–∂–∞—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

### –¢–µ–∫—É—â–∏–µ –æ—Ç—á—ë—Ç—ã
- `LOGGER_MIGRATION_REPORT.md` - –º–∏–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (73 –ª–æ–≥–∞)
- `TMP_MIGRATION_REPORT.md` - –º–∏–≥—Ä–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (DuplicateUtils)
- `REFACTORING_REPORT.md` - –æ–±—â–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (280+ —Å—Ç—Ä–æ–∫ —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ)

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ—Ç—á—ë—Ç–æ–≤
```bash
# –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ—Ç—á—ë—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ
echo "# –ù–æ–≤—ã–π –æ—Ç—á—ë—Ç" > ./tmp/reports/FEATURE_REPORT.md

# –ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –≤ docs/ - —ç—Ç–æ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –ø–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ –∫–ª—é—á–µ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –æ—Ç—á—ë—Ç–∞ –≤ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:
- `docs/ARCHITECTURE.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `docs/DEVELOPMENT_GUIDE.md` - –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏  
- `docs/README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
levelDesigner/
‚îú‚îÄ‚îÄ index.html              # –û—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
‚îú‚îÄ‚îÄ src/                    # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ models/            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ managers/          # –ú–µ–Ω–µ–¥–∂–µ—Ä—ã —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ ui/                # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BaseDialog.js  # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ panel-structures/ # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–Ω–µ–ª–µ–π –∏ –¥–∏–∞–ª–æ–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ core/              # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md              # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## CSS Architecture (updated)

**–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–∏–ª–µ–π** –≤ –ø–∞–ø–∫–µ `styles/`:

```
styles/
‚îú‚îÄ‚îÄ main.css              # –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ compact-mode.css      # –°—Ç–∏–ª–∏ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
‚îú‚îÄ‚îÄ panels.css           # –°—Ç–∏–ª–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π
‚îú‚îÄ‚îÄ layers-panel.css     # –°—Ç–∏–ª–∏ –ø–∞–Ω–µ–ª–∏ —Å–ª–æ–µ–≤
‚îú‚îÄ‚îÄ settings-panel.css   # –°—Ç–∏–ª–∏ –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îú‚îÄ‚îÄ grid-settings.css    # –°—Ç–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥—Ä–∏–¥–∞
‚îú‚îÄ‚îÄ details-panel.css    # –°—Ç–∏–ª–∏ –ø–∞–Ω–µ–ª–∏ –¥–µ—Ç–∞–ª–µ–π
‚îú‚îÄ‚îÄ color-chooser.css    # –°—Ç–∏–ª–∏ –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞
‚îú‚îÄ‚îÄ base-context-menu.css    # –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –º–µ–Ω—é
‚îú‚îÄ‚îÄ canvas-context-menu.css  # –°—Ç–∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é –∫–∞–Ω–≤—ã
‚îú‚îÄ‚îÄ console-context-menu.css # –°—Ç–∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é –∫–æ–Ω—Å–æ–ª–∏
‚îî‚îÄ‚îÄ user-settings.css    # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∏–ª–µ–π
```

**–ü—Ä–∏–Ω—Ü–∏–ø—ã CSS –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ inline —Å—Ç–∏–ª–µ–π** - –≤—Å–µ —Å—Ç–∏–ª–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã** - –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è —Ñ–æ—Ä–º –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞–º–∏ –∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç —Å–≤–æ–π CSS —Ñ–∞–π–ª
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - CSS —Ñ–∞–π–ª—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º
- **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ UI** - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (—Ç–∞–±—ã, –∫–Ω–æ–ø–∫–∏, —Ñ–æ—Ä–º—ã)

**HoverEffects Utility:**
- **–§–∞–π–ª**: `src/utils/HoverEffects.js`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ hover —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- **–ú–µ—Ç–æ–¥—ã**: `setupHoverListeners()`, `applyHoverEffect()`, `removeHoverEffect()`
- **–¢–∏–ø—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤**: brightness, background, color, class

**Unified Tab System:**
- **–§–∞–π–ª—ã**: `styles/main.css`, `styles/panels.css`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- **–ö–ª–∞—Å—Å—ã**: `.tab`, `.tab-right` - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ padding, font-size, hover —ç—Ñ—Ñ–µ–∫—Ç—ã, –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

## –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –¥–∏–∞–ª–æ–≥–æ–≤ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ v3.52.7)

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏
–í—Å–µ –¥–∏–∞–ª–æ–≥–æ–≤—ã–µ –æ–∫–Ω–∞ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å UniversalWindowHandlers.

#### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- `apply()` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- `cancel()` - –æ—Ç–º–µ–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
- `hide()` - —Å–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)

#### –ü—Ä–∏–º–µ—Ä —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ ActorPropertiesWindow:
```javascript
// ‚ùå –î–û (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
class ActorPropertiesWindow {
    onConfirm() {
        this.applyChanges();  // –í—ã–∑–æ–≤ —Å—Ç–∞—Ä–æ–≥–æ –º–µ—Ç–æ–¥–∞
    }
    
    applyChanges() {
        // ... –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
    }
    
    apply() {
        this.applyChanges();  // –î—É–±–ª–∏—Ä—É—é—â–∏–π –º–µ—Ç–æ–¥-–æ–±–µ—Ä—Ç–∫–∞
    }
}

// ‚úÖ –ü–û–°–õ–ï (—É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è)
class ActorPropertiesWindow {
    onConfirm() {
        this.apply();  // –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞
    }
    
    apply() {
        // ... –≤—Å—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
    }
}
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏:
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å UniversalWindowHandlers** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** - –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –≤–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** - –º–µ–Ω—å—à–µ –∫–æ–¥–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –≤—Å—è –ª–æ–≥–∏–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

## –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π (–æ–±–Ω–æ–≤–ª–µ–Ω–æ v3.52.6)

### ResizerManager - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
–í—Å–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –ø–∞–Ω–µ–ª–µ–π —Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π ResizerManager.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
- **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - –≤—Å–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ ResizerManager
- **Fallback —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ResizerManager
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è:
```javascript
// –í PanelPositionManager –∏–ª–∏ AssetPanel
if (this.levelEditor?.resizerManager) {
    this.levelEditor.resizerManager.registerResizer(
        resizerElement,    // DOM —ç–ª–µ–º–µ–Ω—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
        panelElement,      // DOM —ç–ª–µ–º–µ–Ω—Ç –ø–∞–Ω–µ–ª–∏
        'left',            // –°—Ç–æ—Ä–æ–Ω–∞ –ø–∞–Ω–µ–ª–∏ ('left', 'right', 'assets', 'folders')
        'horizontal'       // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ('horizontal', 'vertical')
    );
} else {
    // Fallback –Ω–∞ legacy –∫–æ–¥
    this.setupLegacyResizer(resizerElement, panelElement, panelSide);
}
```

#### Legacy –ø–æ–¥–¥–µ—Ä–∂–∫–∞:
```javascript
// Fallback –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
setupLegacyPanelResizer(resizer, panel, panelSide) {
    // –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ mouse —Å–æ–±—ã—Ç–∏–π
    resizer.addEventListener('mousedown', (e) => {
        // ... legacy –∫–æ–¥
    });
}
```

## –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π –ø–∞–Ω–µ–ª–µ–π

–†–µ–¥–∞–∫—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–∏–±–∫—É—é —Å–∏—Å—Ç–µ–º—É —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–∞–Ω–µ–ª–µ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–∞–±–ª-–∫–ª–∏–∫–∞ –¥–ª—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è:

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π

```javascript
// –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π –ø–∞–Ω–µ–ª–µ–π
function applyPanelStyles(panel, size, direction = 'width', display = 'flex') {
    if (direction === 'width') {
        panel.style.width = size + 'px';
        panel.style.flex = '0 0 auto';
    } else {
        panel.style.height = size + 'px';
        panel.style.flexShrink = '0';
    }
    panel.style.display = display;
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `panel` - DOM —ç–ª–µ–º–µ–Ω—Ç –ø–∞–Ω–µ–ª–∏
- `size` - —Ä–∞–∑–º–µ—Ä –≤ –ø–∏–∫—Å–µ–ª—è—Ö
- `direction` - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `'width'` –∏–ª–∏ `'height'`
- `display` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: `'flex'` –∏–ª–∏ `'none'`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```javascript
// –î–ª—è –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å)
applyPanelStyles(rightPanel, newWidth, 'width', 'flex');

// –î–ª—è –ø–∞–Ω–µ–ª–∏ –∞—Å—Å–µ—Ç–æ–≤ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å)
applyPanelStyles(assetsPanel, newHeight, 'height', 'flex');

// –°–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ª—é–±–æ–π –ø–∞–Ω–µ–ª–∏
applyPanelStyles(anyPanel, 0, 'width', 'none');
```

### –î–∞–±–ª-–∫–ª–∏–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π

–í—Å–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥–∞–±–ª-–∫–ª–∏–∫ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è:

```javascript
// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–∞–±–ª-–∫–ª–∏–∫–∞ –¥–ª—è –ø—Ä–∞–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
resizerX.addEventListener('dblclick', (e) => {
    e.preventDefault();
    e.stopPropagation();
    
    const currentWidth = rightPanel.offsetWidth;
    const minWidth = 0;
    
    if (currentWidth <= minWidth) {
        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–∞–∑–º–µ—Ä
        const newWidth = Math.min(previousRightPanelWidth, maxWidth);
        applyPanelStyles(rightPanel, newWidth, 'width', 'flex');
        
        // –û–±–Ω–æ–≤–∏—Ç—å StateManager –∏ preferences
        if (window.editor && window.editor.stateManager) {
            window.editor.stateManager.set('panels.rightPanelWidth', newWidth);
        }
        userPrefs.set('rightPanelWidth', newWidth);
    } else {
        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä –∏ —Å–≤–µ—Ä–Ω—É—Ç—å
        previousRightPanelWidth = currentWidth;
        applyPanelStyles(rightPanel, 0, 'width', 'none');
        
        // –û–±–Ω–æ–≤–∏—Ç—å StateManager –∏ preferences
        if (window.editor && window.editor.stateManager) {
            window.editor.stateManager.set('panels.rightPanelWidth', 0);
        }
        userPrefs.set('rightPanelWidth', 0);
    }
    
    // –û–±–Ω–æ–≤–∏—Ç—å canvas
    if (window.editor && window.editor.canvasRenderer) {
        window.editor.canvasRenderer.resizeCanvas();
        window.editor.render();
    }
});
```

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (–º–µ–∂–¥—É canvas –∏ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª—å—é)

```javascript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ mousedown –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
resizerX.addEventListener('mousedown', (e) => {
    isResizingX = true;
    isAnyResizing = true;
    initialMouseX = e.clientX;
    initialRightPanelWidth = rightPanel.offsetWidth;
    // ... –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—É—Ä—Å–æ—Ä–∞ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ mousemove —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
if (isResizingX) {
    const mouseDelta = e.clientX - initialMouseX;
    const containerWidth = mainContainer.clientWidth;
    const resizerWidth = 6;
    
    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞: 0 –¥–æ (containerWidth - resizerWidth)
    let newWidth = initialRightPanelWidth - mouseDelta;
    if (newWidth < 0) newWidth = 0;
    const maxWidth = Math.max(0, containerWidth - resizerWidth);
    if (newWidth > maxWidth) newWidth = maxWidth;
    
    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–∏ —É–ø–æ—Ä–µ –≤ –≥—Ä–∞–Ω–∏—Ü—ã
    if (lastAppliedRightWidth !== null && newWidth === lastAppliedRightWidth) {
        return;
    }
    
    rightPanel.style.width = newWidth + 'px';
    rightPanel.style.flex = '0 0 auto';
    lastAppliedRightWidth = newWidth;
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ canvas –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    if (window.editor && window.editor.canvasRenderer) {
        window.editor.canvasRenderer.resizeCanvas();
        window.editor.render();
    }
}
```

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (–º–µ–∂–¥—É canvas –∏ –ø–∞–Ω–µ–ª—å—é –∞—Å—Å–µ—Ç–æ–≤)

```javascript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ mousemove –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
if (isResizingAssets) {
    const mouseDelta = e.clientY - initialMouseY;
    const newHeight = initialAssetsPanelHeight - mouseDelta;
    
    assetsPanel.style.height = newHeight + 'px';
    assetsPanel.style.flexShrink = '0';
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ canvas –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    if (window.editor && window.editor.canvasRenderer) {
        window.editor.canvasRenderer.resizeCanvas();
        window.editor.render();
    }
}
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π

1. **–ì–∏–±–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** - –ø–∞–Ω–µ–ª–∏ –º–æ–≥—É—Ç —Å–∂–∏–º–∞—Ç—å—Å—è –¥–æ –Ω—É–ª—è –∏–ª–∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å—Å—è –¥–æ –º–∞–∫—Å–∏–º—É–º–∞
2. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ —É–ø–æ—Ä–µ** - —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–∞–Ω–µ–ª—å –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –≥—Ä–∞–Ω–∏—Ü
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - canvas –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫** - —Ä–∞–∑–º–µ—Ä—ã –ø–∞–Ω–µ–ª–µ–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage
5. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ø–∞–Ω–µ–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞

## –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–†–µ–¥–∞–∫—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –≥–∏–±–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Settings Panel UI          ‚îÇ ‚Üê –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ        SettingsSyncManager         ‚îÇ ‚Üê –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è UI ‚Üî StateManager
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  UserPreferencesManager  ConfigManager ‚îÇ ‚Üê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   localStorage / JSON —Ñ–∞–π–ª—ã        ‚îÇ ‚Üê –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¢–∏–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫

**1. –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** (`config/defaults/*.json`):
- `editor.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (autoSave, axis constraints, etc.)
- `ui.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (fontScale, spacingH, spacingV, elementSize, panel sizes)
- `canvas.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ canvas (grid, colors, snap settings)
- `panels.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–Ω–µ–ª–µ–π (tabs order, visibility)
- `shortcuts.json` - –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
- `toolbar.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—É–ª–±–∞—Ä–∞

**2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** (`config/user/*.json`):
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ

### –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫

**ConfigManager**:
```javascript
class ConfigManager {
    // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    async loadAllConfigsSync()

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ –ø—É—Ç–∏
    get(path) // 'ui.fontScale' ‚Üí 1.2

    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π
    set(path, value)

    // –°–±—Ä–æ—Å –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º
    reset()
}
```

**UserPreferencesManager**:
```javascript
class UserPreferencesManager {
    // –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–ª—é—á–µ–π –Ω–∞ –∫–æ–Ω—Ñ–∏–≥-–ø—É—Ç–∏
    pathMapping = {
        'assetSize': 'ui.assetSize',
        'toolbarButtonStates': 'toolbar.buttonStates'
    }

    // –£–¥–æ–±–Ω—ã–π API –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
    set(key, value)
    get(key)
}
```

**SettingsSyncManager**:
```javascript
class SettingsSyncManager {
    // –ú–∞–ø–ø–∏–Ω–≥ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ StateManager
    stateMapping = {
        'ui.compactMode': 'ui.compactMode',
        'canvas.snapToGrid': 'canvas.snapToGrid'
    }

    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è UI ‚Üî StateManager
    applyAllUISettingsToState()
    syncSettingToState(path, value)
}
```

### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª `config/defaults/shortcuts.json`:

```json
{
  "editor": {
    "undo": {"key": "Z", "ctrlKey": true, "description": "Undo"},
    "delete": {"key": "Delete", "description": "Delete objects"}
  },
  "ui": {
    "focusLayersSearch": {"key": "L", "ctrlKey": true, "description": "Focus search"}
  }
}
```

**–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ö–æ—Ç–∫–µ–µ–≤**:
- –î–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ Settings ‚Üí Hotkeys
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `config/user/shortcuts.json`
- –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–û—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (`modifiedConfigs`)
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`beforeunload`)
- –£–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ localStorage

**–°–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è**:
```javascript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏
window.addEventListener('beforeunload', () => {
    configManager.forceSaveAllSettings();
});

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫
document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
        configManager.forceSaveAllSettings();
    }
});
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û**: –í—Å–µ –º–µ—Ç–æ–¥—ã render –≤ Settings Panel –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **BaseDialog** –∏ **SettingsSectionConstructor** –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è.

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **BaseDialog**:

```javascript
import { BaseDialog } from './BaseDialog.js';
import { getDialogStructure } from './panel-structures/DialogStructures.js';

// –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
const config = {
    ...getDialogStructure('standard'),
    title: 'My Dialog',
    contentRenderer: () => '<div>Dialog content</div>',
    onConfirm: () => console.log('Confirmed'),
    onCancel: () => console.log('Cancelled')
};

const dialog = new BaseDialog(config);
dialog.show();
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ BaseDialog:**
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –ø–æ —Ä–∞–∑–º–µ—Ä—É –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —à–∏—Ä–∏–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ü–ª–∞–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ —Å–∫–∞—á–∫–æ–≤ —Ä–∞–∑–º–µ—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏

**–°–º. –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:** `docs/DIALOG_SYSTEM.md`

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞

#### –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –æ–±—ä–µ–∫—Ç–∞

```javascript
// src/models/CustomObject.js
import { GameObject } from './GameObject.js';

export class CustomObject extends GameObject {
    constructor(data = {}) {
        super(data);
        this.type = 'custom';
        this.customProperty = data.customProperty || 'default';
    }

    // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã
    doCustomAction() {
        // –õ–æ–≥–∏–∫–∞ –æ–±—ä–µ–∫—Ç–∞
    }

    toJSON() {
        return {
            ...super.toJSON(),
            customProperty: this.customProperty
        };
    }

    static fromJSON(data) {
        const obj = new CustomObject(data);
        obj.customProperty = data.customProperty;
        return obj;
    }
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

```javascript
// src/ui/CanvasRenderer.js
import { CustomObject } from '../models/CustomObject.js';

export class CanvasRenderer {
    drawSingleObject(obj, x, y) {
        if (obj.type === 'custom') {
            this.drawCustomObject(obj, x, y);
        } else {
            // —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
        }
    }

    drawCustomObject(obj, x, y) {
        // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
        this.ctx.fillStyle = obj.color;
        this.ctx.fillRect(x, y, obj.width, obj.height);
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
        this.ctx.strokeStyle = '#ff0000';
        this.ctx.lineWidth = 2;
        this.ctx.strokeRect(x, y, obj.width, obj.height);
    }
}
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∞—Å—Å–µ—Ç—ã

```javascript
// src/managers/AssetManager.js
import { CustomObject } from '../models/CustomObject.js';

export class AssetManager {
    loadDefaultAssets() {
        // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞—Å—Å–µ—Ç—ã
        
        const customAssets = [
            {
                id: 'custom_object',
                name: 'Custom Object',
                type: 'custom',
                category: 'Custom',
                width: 32,
                height: 32,
                color: '#ff6b6b',
                properties: { customProperty: 'value' }
            }
        ];

        customAssets.forEach(assetData => {
            const asset = new Asset(assetData);
            this.assets.set(asset.id, asset);
        });
    }
}
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π UI –ø–∞–Ω–µ–ª–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –ø–∞–Ω–µ–ª–∏

```javascript
// src/ui/CustomPanel.js
export class CustomPanel {
    constructor(container, stateManager, level) {
        this.container = container;
        this.stateManager = stateManager;
        this.level = level;
        this.setupEventListeners();
    }

    setupEventListeners() {
        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
        this.stateManager.subscribe('selectedObjects', () => {
            this.render();
        });
    }

    render() {
        this.container.innerHTML = `
            <h3 class="text-lg font-bold mb-3">Custom Panel</h3>
            <div id="custom-content">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–Ω–µ–ª–∏ -->
            </div>
        `;
    }

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
    updateCustomData() {
        // –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    }
}
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ HTML

```html
<!-- index-modular.html -->
<div id="right-panel" class="w-80 bg-gray-900 flex flex-col flex-shrink-0">
    <div class="flex border-b border-gray-700 flex-shrink-0">
        <button data-tab="details" class="tab-right flex-1 p-2 text-sm font-medium active">Details</button>
        <button data-tab="level" class="tab-right flex-1 p-2 text-sm font-medium">Level</button>
        <button data-tab="outliner" class="tab-right flex-1 p-2 text-sm font-medium">Outliner</button>
        <button data-tab="custom" class="tab-right flex-1 p-2 text-sm font-medium">Custom</button>
    </div>
    <div class="flex-grow overflow-y-auto">
        <!-- ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞–Ω–µ–ª–∏ ... -->
        <div id="custom-content-panel" class="p-4 tab-content-right hidden">
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π –ø–∞–Ω–µ–ª–∏ -->
        </div>
    </div>
</div>
```

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ LevelEditor

```javascript
// src/core/LevelEditor.js
import { CustomPanel } from '../ui/CustomPanel.js';

export class LevelEditor {
    async init() {
        // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        
        const customPanel = document.getElementById('custom-content-panel');
        this.customPanel = new CustomPanel(customPanel, this.stateManager, this);
    }

    setupRightPanelTabs() {
        const tabs = document.querySelectorAll('.tab-right');
        const contents = document.querySelectorAll('.tab-content-right');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞
                
                const tabName = tab.dataset.tab;
                if (tabName === 'custom') {
                    this.customPanel.render();
                }
            });
        });
    }
}
```

### 3. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –ø–∞–Ω–µ–ª–∏ —Å–ª–æ—ë–≤

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

**–î–≤–æ–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π:**
- **–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ª–æ–∏** - —Å–ª–æ–∏ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ (border highlight)
- **–¢–µ–∫—É—â–∏–π —Å–ª–æ–π** - —Å–ª–æ–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (blue background)

**–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// LevelEditor - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
getCurrentLayer() // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ—è
setCurrentLayer(layerId) // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ—è

// LayersPanel - –ª–æ–∫–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
this.currentLayerId = null; // –ö–µ—à –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

#### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
```javascript
initializeCurrentLayer() {
    const level = this.levelEditor.getLevel();
    if (level) {
        this.currentLayerId = level.getMainLayerId();
        this.levelEditor.setCurrentLayer(this.currentLayerId);
    }
}
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:**
```javascript
setCurrentLayer(layerId) {
    const level = this.levelEditor.getLevel();
    const layer = level.getLayerById(layerId);
    if (!layer) return;
    
    this.currentLayerId = layerId;
    this.updateLayerStyles();
}

setCurrentLayerAndNotify(layerId) {
    this.setCurrentLayer(layerId);
    this.levelEditor.setCurrentLayer(layerId);
    this.levelEditor.updateAllPanels();
}
```

**–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω—é:**
```javascript
showLayerContextMenu(layer, event) {
    // –£–º–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≥—Ä–∞–Ω–∏—Ü
    const menuWidth = 192;
    const menuHeight = 200;
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;
    
    let left = event.clientX;
    let top = event.clientY;
    
    // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∑–∞ —ç–∫—Ä–∞–Ω
    if (left + menuWidth > viewportWidth) {
        left = viewportWidth - menuWidth - 10;
    }
    if (top + menuHeight > viewportHeight) {
        top = viewportHeight - menuHeight - 10;
    }
    
    left = Math.max(10, left);
    top = Math.max(10, top);
}
```

**–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
```javascript
getFilteredLayers(layers) {
    if (!this.searchFilter) return layers;
    
    const filter = this.searchFilter.toLowerCase();
    return layers.filter(layer => 
        layer.name.toLowerCase().includes(filter)
    );
}

setupSearch() {
    const searchInput = this.container.querySelector('#layers-search');
    if (!searchInput) return;
    
    searchInput.addEventListener('input', (e) => {
        this.searchFilter = e.target.value;
        this.render();
    });
}
```

**–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
```javascript
selectAllLayers() {
    const level = this.levelEditor.getLevel();
    const allLayerIds = level.layers.map(layer => layer.id);
    this.selectedLayers = new Set(allLayerIds);
    this.updateLayerStyles();
}

showAllLayers() {
    const level = this.levelEditor.getLevel();
    level.layers.forEach(layer => {
        layer.visible = true;
    });
    this.stateManager.markDirty();
    this.render();
}
```

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
```javascript
updateLayersStats() {
    const level = this.levelEditor.getLevel();
    const stats = level.getLayersStats(); // –ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
    if (this.lastStatsHash !== stats.hash) {
        this.renderLayersStats(stats);
        this.lastStatsHash = stats.hash;
    }
}
```

**–ò–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π:**
```javascript
updateLayerStyles() {
    const layerElements = this.container.querySelectorAll('.layer-item');
    layerElements.forEach(element => {
        const layerId = element.dataset.layerId;
        const isActive = this.isLayerActive(layerId);
        const isCurrent = layerId === this.currentLayerId;
        const isSelected = this.selectedLayers.has(layerId);
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Å—Ç–∏–ª–µ–π
        this.applyLayerStyles(element, { isActive, isCurrent, isSelected });
    });
}
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

**–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```javascript
setupEventListeners() {
    // –ò–∑–º–µ–Ω–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è - —Ç–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –Ω–µ —Å–±—Ä–æ—Å
    this.stateManager.subscribe('level', () => {
        if (!this.currentLayerId) {
            this.initializeCurrentLayer();
        }
        this.render();
    });
    
    // –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–¥–µ–ª–µ–Ω–∏—è - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ª–æ—ë–≤
    this.stateManager.subscribe('selectedObjects', () => {
        this.updateLayerStyles();
    });
    
    // –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–æ–≤ —Å–ª–æ—ë–≤ - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    this.stateManager.subscribe('layerObjectsCountChanged', (layerId, changeData) => {
        this.updateLayerObjectsCount(layerId);
    });
}
```

**–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:**
```javascript
setupKeyboardShortcuts() {
    document.addEventListener('keydown', (e) => {
        if (e.ctrlKey && e.key === 'l') {
            e.preventDefault();
            this.selectAllLayers();
        }
        
        if (e.key === 'Delete' && this.selectedLayers.size > 0) {
            this.deleteSelectedLayers();
        }
    });
}
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ —Å–ª–æ—ë–≤

**Unit —Ç–µ—Å—Ç—ã:**
```javascript
// tests/LayersPanel.test.js
describe('LayersPanel', () => {
    test('should initialize current layer on startup', () => {
        const panel = new LayersPanel(container, stateManager, levelEditor);
        expect(panel.currentLayerId).toBe(level.getMainLayerId());
    });
    
    test('should not reset current layer when moving objects', () => {
        panel.setCurrentLayer('custom-layer');
        // –°–∏–º—É–ª—è—Ü–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
        stateManager.set('level', JSON.parse(JSON.stringify(level)));
        expect(panel.currentLayerId).toBe('custom-layer');
    });
});
```

**Integration —Ç–µ—Å—Ç—ã:**
```javascript
test('should create new objects in current layer', () => {
    panel.setCurrentLayer('background-layer');
    const newObject = asset.createInstance(100, 100);
    level.addObject(newObject);
    expect(newObject.layerId).toBe('background-layer');
});
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à

```javascript
// src/core/LevelEditor.js
setupKeyboardEvents() {
    window.addEventListener('keydown', (e) => {
        if (document.activeElement.tagName === 'INPUT') return;
        
        // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
        
        if (e.key.toLowerCase() === 'c' && e.ctrlKey) {
            e.preventDefault();
            this.copySelectedObjects();
        } else if (e.key.toLowerCase() === 'v' && e.ctrlKey) {
            e.preventDefault();
            this.pasteObjects();
        } else if (e.key === 'Escape') {
            e.preventDefault();
            this.cancelAllActions(); // –û—Ç–º–µ–Ω–∞ –≤—Å–µ—Ö —Ç–µ–∫—É—â–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
        }
    });
}

copySelectedObjects() {
    const selectedObjects = this.stateManager.get('selectedObjects');
    const objects = Array.from(selectedObjects)
        .map(id => this.level.findObjectById(id))
        .filter(Boolean);
    
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
    this.clipboard = objects.map(obj => this.deepClone(obj));
}

pasteObjects() {
    if (!this.clipboard) return;
    
    this.historyManager.saveState(this.level.objects);
    
    const newIds = new Set();
    this.clipboard.forEach(obj => {
        obj.id = this.level.nextObjectId++;
        obj.x += 20; // –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏
        obj.y += 20;
        this.level.objects.push(obj);
        newIds.add(obj.id);
    });
    
    this.stateManager.set('selectedObjects', newIds);
    this.updateAllPanels();
    this.render();
}

// –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º
cancelAllActions() {
    const mouse = this.stateManager.get('mouse');
    if (mouse.isPlacingObjects) {
        this.stateManager.update({
            'mouse.isPlacingObjects': false,
            'mouse.placingObjects': []
        });
    }
    if (mouse.isMarqueeSelecting) {
        this.stateManager.update({
            'mouse.isMarqueeSelecting': false,
            'mouse.marqueeRect': null
        });
    }
    if (mouse.isDragging) {
        this.stateManager.update({
            'mouse.isDragging': false
        });
    }
    if (mouse.isRightDown) {
        this.stateManager.update({
            'mouse.isRightDown': false
        });
    }
    // –û—Ç–º–µ–Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
    this.stateManager.update({
        'duplicate.isActive': false,
        'duplicate.objects': [],
        'duplicate.basePosition': { x: 0, y: 0 }
    });
    this.render();
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã

```javascript
// tests/GameObject.test.js
import { GameObject } from '../src/models/GameObject.js';

describe('GameObject', () => {
    test('should create object with default values', () => {
        const obj = new GameObject();
        expect(obj.id).toBeDefined();
        expect(obj.name).toBe('Unnamed Object');
        expect(obj.type).toBe('object');
        expect(obj.x).toBe(0);
        expect(obj.y).toBe(0);
    });

    test('should create object with custom data', () => {
        const data = { name: 'Test', x: 100, y: 200 };
        const obj = new GameObject(data);
        expect(obj.name).toBe('Test');
        expect(obj.x).toBe(100);
        expect(obj.y).toBe(200);
    });

    test('should check point containment', () => {
        const obj = new GameObject({ x: 10, y: 10, width: 20, height: 20 });
        expect(obj.containsPoint(15, 15)).toBe(true);
        expect(obj.containsPoint(5, 5)).toBe(false);
        expect(obj.containsPoint(35, 35)).toBe(false);
    });

    test('should serialize to JSON', () => {
        const obj = new GameObject({ name: 'Test' });
        const json = obj.toJSON();
        expect(json.name).toBe('Test');
        expect(json.id).toBe(obj.id);
    });
});
```

### Integration —Ç–µ—Å—Ç—ã

```javascript
// tests/StateManager.test.js
import { StateManager } from '../src/managers/StateManager.js';

describe('StateManager', () => {
    let stateManager;

    beforeEach(() => {
        stateManager = new StateManager();
    });

    test('should notify listeners on state change', () => {
        const callback = jest.fn();
        stateManager.subscribe('selectedObjects', callback);
        
        stateManager.set('selectedObjects', new Set([1, 2, 3]));
        
        expect(callback).toHaveBeenCalledWith(
            new Set([1, 2, 3]),
            new Set()
        );
    });

    test('should handle multiple listeners', () => {
        const callback1 = jest.fn();
        const callback2 = jest.fn();
        
        stateManager.subscribe('selectedObjects', callback1);
        stateManager.subscribe('selectedObjects', callback2);
        
        stateManager.set('selectedObjects', new Set([1]));
        
        expect(callback1).toHaveBeenCalled();
        expect(callback2).toHaveBeenCalled();
    });

    test('should unsubscribe listeners', () => {
        const callback = jest.fn();
        const unsubscribe = stateManager.subscribe('selectedObjects', callback);
        
        unsubscribe();
        stateManager.set('selectedObjects', new Set([1]));
        
        expect(callback).not.toHaveBeenCalled();
    });
});
```

### E2E —Ç–µ—Å—Ç—ã

```javascript
// tests/e2e/level-editor.test.js
describe('Level Editor E2E', () => {
    beforeEach(async () => {
        await page.goto('http://localhost:8000/index-modular.html');
        await page.waitForSelector('#main-canvas');
    });

    test('should create new level', async () => {
        await page.click('#new-level');
        await page.waitForSelector('.outliner-item');
        
        const objects = await page.$$('.outliner-item');
        expect(objects.length).toBeGreaterThan(0);
    });

    test('should place asset on canvas', async () => {
        // –í—ã–±—Ä–∞—Ç—å –∞—Å—Å–µ—Ç
        await page.click('.asset-thumbnail[data-asset-id="any_asset_id"]');
        
        // –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å –Ω–∞ canvas
        const canvas = await page.$('#main-canvas');
        const canvasBox = await canvas.boundingBox();
        
        await page.mouse.move(canvasBox.x + 100, canvasBox.y + 100);
        await page.mouse.down();
        await page.mouse.up();
        
        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω
        const selectedObjects = await page.evaluate(() => {
            return window.editor.stateManager.get('selectedObjects').size;
        });
        
        expect(selectedObjects).toBe(1);
    });

    test('should save and load level', async () => {
        // –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç
        await page.click('.asset-thumbnail[data-asset-id="any_asset_id"]');
        const canvas = await page.$('#main-canvas');
        const canvasBox = await canvas.boundingBox();
        await page.mouse.move(canvasBox.x + 100, canvasBox.y + 100);
        await page.mouse.down();
        await page.mouse.up();
        
        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å
        const [download] = await Promise.all([
            page.waitForEvent('download'),
            page.click('#save-level')
        ]);
        
        expect(download.suggestedFilename()).toMatch(/\.json$/);
    });
});
```

## –û—Ç–ª–∞–¥–∫–∞

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```javascript
// –î–æ—Å—Ç—É–ø –∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä—É
window.editor

// –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
window.editor.stateManager.getState()

// –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
window.editor.level

// –ü–æ–ª—É—á–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
window.editor.stateManager.get('selectedObjects')

// –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
const obj = new GameObject({ name: 'Debug Object', x: 100, y: 100 });
window.editor.level.addObject(obj);
window.editor.render();

// –û—á–∏—Å—Ç–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ
window.editor.stateManager.clearSelection();

// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–º–µ—Ä—É
window.editor.stateManager.set('camera', { x: 0, y: 0, zoom: 1 });
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```javascript
// –í–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
localStorage.setItem('debug', 'true');

// –û—Ç–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
localStorage.removeItem('debug');

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ
if (localStorage.getItem('debug')) {
    console.log('Debug info:', data);
}
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

```javascript
// –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
const startTime = performance.now();
// ... –æ–ø–µ—Ä–∞—Ü–∏—è
const endTime = performance.now();
console.log(`Operation took ${endTime - startTime} milliseconds`);

// –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
if (performance.memory) {
    console.log('Memory usage:', {
        used: performance.memory.usedJSHeapSize,
        total: performance.memory.totalJSHeapSize,
        limit: performance.memory.jsHeapSizeLimit
    });
}
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–î–µ–±–∞—É–Ω—Å–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π**:
```javascript
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const debouncedRender = debounce(() => this.render(), 16);
```

2. **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤**:
```javascript
// –î–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤
class VirtualizedList {
    constructor(container, items, itemHeight) {
        this.container = container;
        this.items = items;
        this.itemHeight = itemHeight;
        this.visibleStart = 0;
        this.visibleEnd = 0;
    }

    updateVisibleRange(scrollTop, containerHeight) {
        this.visibleStart = Math.floor(scrollTop / this.itemHeight);
        this.visibleEnd = Math.min(
            this.visibleStart + Math.ceil(containerHeight / this.itemHeight),
            this.items.length
        );
    }
}
```

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```bash
# –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è JavaScript
npx terser src/**/*.js -o dist/editor.min.js

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
npx imagemin assets/*.png --out-dir=dist/assets

# –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞
zip -r level-editor.zip dist/ index-modular.html
```

### Tailwind CSS (–ª–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞)

- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º CDN `cdn.tailwindcss.com` –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.
- –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ `styles/tailwind.build.css`.

–°–∫—Ä–∏–ø—Ç—ã:
```bash
npm run build:css   # –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è —Å–±–æ—Ä–∫–∞
npm run watch:css   # –≤–æ—Ç—á –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
```

–ò—Å—Ö–æ–¥–Ω–∏–∫–∏:
- `tailwind.config.js`
- `styles/tailwind.css` ‚Üí `styles/tailwind.build.css`

Dev-—Ñ–æ–ª–±–µ–∫: –µ—Å–ª–∏ `tailwind.build.css` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, `index.html` –∑–∞–≥—Ä—É–∂–∞–µ—Ç CDN –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ —ç—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤

### –ü–æ–ª–∏—Ñ–∏–ª–ª—ã

```javascript
// –î–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
if (!window.Set) {
    window.Set = function() {
        this.items = [];
        this.add = function(item) {
            if (this.items.indexOf(item) === -1) {
                this.items.push(item);
            }
        };
        this.has = function(item) {
            return this.items.indexOf(item) !== -1;
        };
        this.delete = function(item) {
            const index = this.items.indexOf(item);
            if (index !== -1) {
                this.items.splice(index, 1);
            }
        };
        this.size = this.items.length;
    };
}
```

### Feature detection

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π
const features = {
    es6Modules: 'noModule' in HTMLScriptElement.prototype,
    canvas: !!document.createElement('canvas').getContext,
    dragDrop: 'draggable' in document.createElement('div'),
    fileAPI: 'File' in window && 'FileReader' in window
};

if (!features.es6Modules) {
    console.warn('ES6 modules not supported, using fallback');
}
```

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø

–†–µ–¥–∞–∫—Ç–æ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø:

```javascript
// –í—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã
enterGroupEditMode(group) {
    this.stateManager.update({
        'groupEditMode': {
            isActive: true,
            groupId: group.id,
            group: group,
            openGroups: [group]
        }
    });
    this.updateAllPanels();
    this.render();
}

// –í—ã—Ö–æ–¥ –∏–∑ —Ä–µ–∂–∏–º–∞
exitGroupEditMode() {
    this.stateManager.update({
        'groupEditMode': {
            isActive: false,
            groupId: null,
            group: null,
            openGroups: []
        }
    });
    this.updateAllPanels();
    this.render();
}
```

### Alt+Drag —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü –¥–ª—è Alt+Drag
handleAltDragInGroup(object, group) {
    const objectBounds = this.getObjectWorldBounds(object);
    const groupBounds = this.getObjectWorldBounds(group, [object.id]);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–∏ –æ–±—ä–µ–∫—Ç –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã
    const isCompletelyInside = 
        objectBounds.minX >= groupBounds.minX &&
        objectBounds.minY >= groupBounds.minY &&
        objectBounds.maxX <= groupBounds.maxX &&
        objectBounds.maxY <= groupBounds.maxY;
    
    return !isCompletelyInside; // –ü–µ—Ä–µ–º–µ—â–∞–µ–º, –µ—Å–ª–∏ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–Ω—É—Ç—Ä–∏
}
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è API –¥–æ—Å—Ç—É–ø–Ω—ã –≤:
- [API_GUIDE.md](./API_GUIDE.md) - –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–µ—Ç–æ–¥–æ–≤
- [ARCHITECTURE.md](./ARCHITECTURE.md) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- [COMMON_MISTAKES.md](./COMMON_MISTAKES.md) - —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏
