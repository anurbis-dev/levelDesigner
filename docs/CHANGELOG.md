# Changelog

## [3.15.0] - 2025-09-24

### Fixed
- Исправлено отображение canvas при изменении видимости toolbar - теперь canvas автоматически адаптируется под новое доступное пространство
- Исправлено закрытие контекстного меню toolbar при активации команды "Hide" - меню теперь закрывается сразу после выполнения действия
- Убрано лишнее логирование в системе toolbar для оптимизации производительности

### Changed
- Улучшена синхронизация между UI элементами toolbar и системой управления панелями
- Оптимизирована инициализация состояния toolbar с canvas renderer

## [3.14.0] - 2024-12-19

### Added
- Полная система сохранения пользовательских настроек тулбара
- Запоминание состояния кнопок тулбара (Grid, Snap, Parallax, Boundaries, Collisions)
- Запоминание свернутых секций тулбара (File, Edit, View, Group)
- Запоминание настроек отображения (иконки и текст кнопок)
- Запоминание видимости тулбара
- Автоматическое сохранение настроек в localStorage
- Восстановление всех настроек при перезагрузке редактора

### Changed
- Улучшена инициализация тулбара - отрисовывается сразу в правильном состоянии
- Устранено визуальное "переключение" тулбара при загрузке настроек
- Оптимизирована система загрузки состояния тулбара
- Улучшена синхронизация состояния кнопок с StateManager

### Fixed
- Исправлена проблема с инверсным отображением кнопки Boundaries
- Устранена задержка при переключении состояния кнопок тулбара
- Исправлена синхронизация визуального состояния с реальным состоянием функций

## [3.13.0] - 2024-12-19

### Added
- Горизонтальное разделение рабочей области с тулбаром в верхней части
- Полнофункциональный тулбар с кнопками управления (File, Edit, View, Tools, Group)
- Сворачиваемые секции тулбара по клику на заголовок
- Контекстное меню тулбара с командами Hide, Icons, Text
- Горизонтальный скроллинг тулбара (колесо мыши + средний клик)
- Управление видимостью иконок и текста кнопок тулбара
- Интеграция тулбара в систему управления панелями

### Changed
- Переработана структура HTML layout для горизонтального разделения
- Тулбар перемещен в верхнюю часть рабочей области
- Обновлена система управления видимостью панелей для тулбара
- Улучшена интеграция тулбара с Game Mode

### Fixed
- Исправлено позиционирование контекстного меню тулбара (открывается вниз)
- Улучшена синхронизация состояний тулбара с меню View
- Оптимизированы стили тулбара для новой позиции

## [3.11.0] - 2024-12-19

### Added
- Улучшенная система контекстных меню с централизованным управлением
- Оптимизированные стили для всех контекстных меню (BaseContextMenu, ConsoleContextMenu)
- Улучшенная функциональность OutlinerContextMenu с исправленными багами

### Changed
- Обновлена система стилей контекстных меню для лучшей совместимости
- Улучшена производительность отображения контекстных меню

### Fixed
- Исправлены проблемы с отображением контекстных меню
- Устранены баги в OutlinerContextMenu
- Улучшена стабильность работы с контекстными меню

## [3.10.0] - 2024-12-19

### Added
- Система констрейна оси при перетаскивании объектов с зажатым Shift
- Визуальное отображение оси констрейна с настраиваемыми параметрами
- Настройки оси констрейна в панели настроек (цвет, толщина, включение/отключение)
- Сохранение всех настроек View в пользовательских настройках
- Корректное вычисление центра групп для оси констрейна
- Поддержка фиксации оси к текущей позиции объекта при зажатии Shift

### Changed
- Ось констрейна теперь фиксируется к центру объекта/группы, а не к курсору
- Ось отображается в обе стороны от центра до краев видимой области
- Настройки View (Grid, Game Mode, Snap To Grid, Object Boundaries, Object Collisions) теперь сохраняются между сессиями
- Game Mode корректно восстанавливается при перезапуске редактора

### Fixed
- Исправлена отрисовка оси констрейна с учетом зума и панорамирования камеры
- Исправлено вычисление центра групп для более точного позиционирования оси
- Исправлено сохранение состояния Game Mode при перезапуске

## [3.9.0] - 2024-12-19

### Added
- Новая система поиска в OutlinerPanel с использованием унифицированного SearchUtils
- Контекстное меню для объектов в OutlinerPanel (OutlinerContextMenu)
- Логика выделения диапазона объектов (Shift+клик)
- Логика переключения единичных объектов (Ctrl+клик)
- Поддержка выделения по отфильтрованному списку при активном поиске
- Новый класс SearchUtils для унифицированного поиска в панелях
- Поддержка Logger.outliner для логирования операций OutlinerPanel

### Changed
- OutlinerPanel теперь использует общую систему поиска с LayersPanel
- Стиль переименования объектов приведен в соответствие с LayersPanel
- Позиционирование иконок типов объектов исправлено и выровнено
- reassignIdsDeep теперь создает строковые ID вместо числовых
- Улучшена индексация дублированных объектов в группах

### Fixed
- Исправлено контекстное меню, которое постоянно показывалось и не исчезало
- Исправлено накопление обработчиков событий при пересоздании контекстного меню
- Исправлена работа контекстного меню на дублированных объектах
- Исправлено позиционирование иконок типов объектов в OutlinerPanel
- Исправлено появление скролл-бара при активации переименования

## [3.8.8] - 2024-12-19

### Fixed
- Исправлены координаты дублируемых объектов в открытых группах - теперь дубликаты появляются точно в том же месте, что и оригиналы
- Исправлен расчет мировых координат для объектов внутри групп при дублировании
- Упрощена логика размещения дублированных объектов в режиме редактирования групп

## [3.8.7] - 2024-12-19

### Added
- Защита от добавления объектов на заблокированные слои через drag&drop

### Changed
- Ctrl+Click на слое теперь выбирает все объекты в слое вместо выбора слоёв
- Alt+Click+Drag теперь работает на любых объектах, не только выбранных

### Fixed
- Исправлена команда "Show All Layers" - объекты корректно отображаются после изменения видимости
- Исправлено дублирование с Alt+Click на невыбранных объектах

### Removed
- Удалена команда "Move Objects to Main Layer" из контекстного меню слоёв
- Удалена логика выбора слоёв (selectedLayers) и связанные методы
- Удалены пункты меню "Select All Layers" и "Deselect All"

## [3.8.6] - 2024-12-18

### Fixed
- Исправлена система версионирования
- Улучшена архитектура утилитарных классов
