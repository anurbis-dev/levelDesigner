# Dialog System Architecture

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–ª–æ–≥–æ–≤ Level Editor v3.52.3 –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤—Å–µ—Ö –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —à–∏—Ä–∏–Ω–æ–π.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### BaseDialog
**–§–∞–π–ª**: `src/ui/BaseDialog.js`

–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π:
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤—ã—Å–æ—Ç—É –ø–æ —Ä–∞–∑–º–µ—Ä—É –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é —à–∏—Ä–∏–Ω—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ú–æ–±–∏–ª—å–Ω—É—é –∞–¥–∞–ø—Ç–∞—Ü–∏—é
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∏–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏
- **–ü–ª–∞–≤–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –±–µ–∑ —Å–∫–∞—á–∫–æ–≤ —Ä–∞–∑–º–µ—Ä–æ–≤**

### DialogStructures
**–§–∞–π–ª**: `src/ui/panel-structures/DialogStructures.js`

–ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∏–∞–ª–æ–≥–æ–≤:
- `StandardDialogStructure` - –±–∞–∑–æ–≤—ã–π –¥–∏–∞–ª–æ–≥
- `SettingsDialogStructure` - –¥–∏–∞–ª–æ–≥ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `ActorPropertiesDialogStructure` - –¥–∏–∞–ª–æ–≥ —Å–≤–æ–π—Å—Ç–≤ –∞–∫—Ç–µ—Ä–∞
- `UniversalDialogStructure` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–∏–∞–ª–æ–≥
- `FolderPickerDialogStructure` - –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ –ø–∞–ø–∫–∏
- `GridSettingsDialogStructure` - –¥–∏–∞–ª–æ–≥ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ç–∫–∏

### SettingsSectionConstructor
**–§–∞–π–ª**: `src/ui/panel-structures/SettingsSectionConstructor.js`

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ–∫—Ü–∏–π SettingsPanel —Å –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º —Å—Ç–∏–ª–µ–º:
- `createSettingsSection()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
- `createSettingsFormGroup()` - —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ñ–æ—Ä–º—ã
- `createSettingsGrid()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- `createSettingsCheckbox()` - —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞ —Å –ª–µ–π–±–ª–æ–º
- `createSettingsRange()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª–∞–π–¥–µ—Ä–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
- `createSettingsColorInput()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–≥–æ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞
- `createSettingsInput()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—è
- `createSettingsLabel()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ª–µ–π–±–ª–∞

## üîÑ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è v3.52.3

### –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ Settings Panel
- **–í—Å–µ –º–µ—Ç–æ–¥—ã render** –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã
- **–£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥** (~400+ —Å—Ç—Ä–æ–∫ HTML)
- **DialogSizeManager –æ–±–Ω–æ–≤–ª–µ–Ω** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ stateManager** –≤ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞—Ö

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `renderGeneralSettings()` ‚Üí `renderGeneralSettingsRefactored()`
- `renderColorsSettings()` ‚Üí `renderColorsSettingsRefactored()`
- `renderSelectionSettings()` ‚Üí `renderSelectionSettingsRefactored()`
- `renderTouchSettings()` ‚Üí `renderTouchSettingsRefactored()`
- `renderCameraSettings()` ‚Üí `renderCameraSettingsRefactored()`
- `renderAssetsSettings()` ‚Üí `renderAssetsSettingsRefactored()`
- `renderPerformanceSettings()` ‚Üí `renderPerformanceSettingsRefactored()`

### DialogSizeManager v3.52.3
- **–î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `stateManager`** –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–µ—Ä–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–æ –∏–º–µ–Ω–∏
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥–∞—á–∏ stateManager** –≤ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `updateDialogSize()`** –≤ SettingsPanel

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞

```javascript
import { BaseDialog } from './BaseDialog.js';
import { getDialogStructure } from './panel-structures/DialogStructures.js';

// –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
const config = {
    ...getDialogStructure('standard'),
    title: 'My Dialog',
    contentRenderer: () => '<div>Dialog content here</div>',
    onConfirm: () => console.log('Confirmed'),
    onCancel: () => console.log('Cancelled')
};

const dialog = new BaseDialog(config);
dialog.show();
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SettingsSectionConstructor

```javascript
import { 
    createSettingsSection, 
    createSettingsFormGroup, 
    createSettingsGrid, 
    createSettingsCheckbox, 
    createSettingsRange, 
    createSettingsColorInput 
} from './ui/panel-structures/SettingsSectionConstructor.js';

// –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ UI
const uiSettingsContent = createSettingsFormGroup(`
    ${createSettingsCheckbox({
        id: 'ui-show-tooltips',
        dataSetting: 'ui.showTooltips',
        checked: settings.ui?.showTooltips,
        label: 'Show Tooltips'
    })}
    
    ${createSettingsGrid(`
        ${createSettingsRange({
            id: 'ui-font-scale',
            dataSetting: 'ui.fontScale',
            value: settings.ui?.fontScale || 1.0,
            min: 0.5,
            max: 2,
            step: 0.1,
            label: 'Font Scale'
        })}
        ${createSettingsRange({
            id: 'ui-spacing',
            dataSetting: 'ui.spacing',
            value: settings.ui?.spacing || 1.0,
            min: 0,
            max: 2,
            step: 0.1,
            label: 'Spacing'
        })}
    `, { columns: 2, gap: '1rem' })}
`);

const section = createSettingsSection('UI Settings', uiSettingsContent);
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞

```javascript
const config = {
    id: 'custom-dialog',
    title: 'Custom Dialog',
    width: '600px',
    showCloseButton: true,
    showFooter: true,
    footerButtons: [
        {
            id: 'save',
            text: 'Save',
            class: 'dialog-btn-save',
            backgroundColor: '#2563eb',
            textColor: 'white',
            action: () => console.log('Save clicked')
        }
    ],
    contentRenderer: () => this.renderCustomContent(),
    onShow: () => console.log('Dialog shown'),
    onHide: () => console.log('Dialog hidden')
};

const dialog = new BaseDialog(config);
```

### –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤

–ü—Ä–∏–º–µ—Ä —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ UniversalDialog:

```javascript
// –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥
export class UniversalDialog {
    createDialog(type, message) {
        // –°–æ–∑–¥–∞–Ω–∏–µ DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é
        this.overlay = document.createElement('div');
        // ... –º–Ω–æ–≥–æ –∫–æ–¥–∞
    }
}

// –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥
export class UniversalDialogRefactored {
    createDialog(type, message) {
        const config = {
            ...getDialogStructure('universal'),
            title: this.getTitle(type),
            contentRenderer: () => this.renderContent(type, message),
            footerButtons: this.getFooterButtons(type)
        };
        
        this.currentDialog = new BaseDialog(config);
        this.currentDialog.show();
    }
}
```

## üé® CSS –°—Ç–∏–ª–∏

### –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
- `.dialog-overlay` - –æ–≤–µ—Ä–ª–µ–π –¥–∏–∞–ª–æ–≥–∞
- `.dialog-container` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–∏–∞–ª–æ–≥–∞
- `.dialog-header` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–∏–∞–ª–æ–≥–∞
- `.dialog-content` - –æ–±–ª–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `.dialog-footer` - –ø–æ–¥–≤–∞–ª –¥–∏–∞–ª–æ–≥–∞

### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- `.mobile-dialog` - –º–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
- `.dialog-btn-*` - —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫

## üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

BaseDialog –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–æ–±–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ —á–µ—Ä–µ–∑ `MobileInterfaceManager`:
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
- Touch-friendly —ç–ª–µ–º–µ–Ω—Ç—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–∏–∞–ª–æ–≥–∞
- `title` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–∏–∞–ª–æ–≥–∞
- `width` - —à–∏—Ä–∏–Ω–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'auto', —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- `height` - –≤—ã—Å–æ—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'calc(100vh - 4rem)')
- `showCloseButton` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è
- `showFooter` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–¥–≤–∞–ª

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–æ–≤

–î–∏–∞–ª–æ–≥–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–µ—Ö–Ω–∏–∫–∏ "—Å–∫—Ä—ã—Ç–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏":

1. **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä** - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–±–µ–∑ DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
2. **show()** - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ–π DOM —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (`visibility: hidden`)
3. **–†–µ–Ω–¥–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞
4. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è** - Font Scale –∏ Spacing –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É
5. **–†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —à–∏—Ä–∏–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å —É—á–µ—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
6. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
7. **–ü–æ–∫–∞–∑** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `visibility: visible` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏

–≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≤–∏–¥–∏–º—ã–µ —Å–∫–∞—á–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤.

### –ö–Ω–æ–ø–∫–∏ –ø–æ–¥–≤–∞–ª–∞
```javascript
footerButtons: [
    {
        id: 'unique-id',
        text: 'Button Text',
        class: 'css-class',
        backgroundColor: '#color',
        textColor: '#color',
        action: () => { /* custom action */ }
    }
]
```

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
- `onShow` - –ø—Ä–∏ –ø–æ–∫–∞–∑–µ –¥–∏–∞–ª–æ–≥–∞
- `onHide` - –ø—Ä–∏ —Å–∫—Ä—ã—Ç–∏–∏ –¥–∏–∞–ª–æ–≥–∞
- `onConfirm` - –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏
- `onCancel` - –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ** - –≤—Å–µ –¥–∏–∞–ª–æ–≥–∏ –≤—ã–≥–ª—è–¥—è—Ç –∏ –≤–µ–¥—É—Ç —Å–µ–±—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ
2. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–∫–∞—á–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
3. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —à–∏—Ä–∏–Ω–∞** - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
4. **–ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
5. **–õ–µ–≥–∫–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –ø—Ä–æ—Å—Ç–æ–π API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤
6. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –¥–∏–∞–ª–æ–≥–æ–≤
7. **–ü–ª–∞–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –æ–∫–Ω–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–∫—Ä—ã—Ç—ã–º–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

–î–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤:

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `BaseDialog` –∏ `getDialogStructure`
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏–∞–ª–æ–≥–∞
3. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å `contentRenderer`
4. –ó–∞–º–µ–Ω–∏—Ç–µ —Ä—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ DOM –Ω–∞ `new BaseDialog(config)`
5. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## üìù –ü—Ä–∏–º–µ—Ä—ã

–°–º. `src/ui/UniversalDialogRefactored.js` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞.

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞

```javascript
// 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–±–µ–∑ DOM)
const config = {
    id: 'my-dialog',
    title: 'My Dialog',
    contentRenderer: () => '<div>Content</div>'
};

// 2. –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ (DOM –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)
const dialog = new BaseDialog(config);

// 3. –ü–æ–∫–∞–∑ –¥–∏–∞–ª–æ–≥–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ–π DOM —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
dialog.show();

// 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
//    - –°–æ–∑–¥–∞–Ω–∏–µ DOM —Å visibility: hidden
//    - –†–µ–Ω–¥–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–∏–∞–ª–æ–≥–∞
//    - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Font Scale –∏ Spacing –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É
//    - –†–∞—Å—á–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —à–∏—Ä–∏–Ω—ã —Å —É—á–µ—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
//    - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
//    - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ visibility: visible
```

### –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–∫–∞—á–∫–æ–≤ —Ä–∞–∑–º–µ—Ä–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `visibility: hidden` –≤–º–µ—Å—Ç–æ `display: none` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ layout –ø—Ä–∏ –ø–æ–∫–∞–∑–µ –¥–∏–∞–ª–æ–≥–∞. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∏–¥–∏–º—ã—Ö –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –°—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
