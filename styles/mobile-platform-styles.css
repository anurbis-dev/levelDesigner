/**
 * Mobile Platform-Specific Styles
 * 
 * Стили для различных мобильных платформ (iOS/Android)
 * с учетом их специфичных особенностей и ограничений
 * 
 * Key features:
 * - iOS-специфичные стили (safe area, zoom prevention)
 * - Android-специфичные стили (touch targets, viewport)
 * - Платформо-специфичные адаптации диалогов
 * - Оптимизации для разных устройств
 * 
 * @author Level Designer
 * @version 3.52.2
 */

/* ===== PLATFORM DETECTION CLASSES ===== */

/* iOS Platform Styles */
.platform-ios {
    /* iOS-specific base styles */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;
}

/* Android Platform Styles */
.platform-android {
    /* Android-specific base styles */
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
}

/* Touch Device Styles */
.touch-device {
    /* Common touch device styles */
    -webkit-overflow-scrolling: touch;
    touch-action: manipulation;
}

/* ===== iOS-SPECIFIC STYLES ===== */

/* iOS Dialog Adaptations */
.platform-ios .ios-dialog {
    /* Safe area insets for iOS */
    padding-top: env(safe-area-inset-top, 1rem);
    padding-bottom: env(safe-area-inset-bottom, 1rem);
    padding-left: env(safe-area-inset-left, 1rem);
    padding-right: env(safe-area-inset-right, 1rem);
    
    /* iOS-specific dialog styling */
    border-radius: 12px;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
}

/* iOS Input Fields */
.platform-ios .ios-input {
    /* Prevent zoom on iOS by using 16px font size */
    font-size: 16px !important;
    -webkit-appearance: none;
    border-radius: 8px;
}

/* iOS Button Styles */
.platform-ios .ios-dialog button,
.platform-ios .ios-dialog .settings-btn {
    /* iOS-style buttons */
    border-radius: 8px;
    font-weight: 500;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.2s ease;
}

.platform-ios .ios-dialog button:active,
.platform-ios .ios-dialog .settings-btn:active {
    transform: scale(0.95);
    opacity: 0.8;
}

/* iOS Context Menus */
.platform-ios .base-context-menu {
    border-radius: 12px;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* ===== ANDROID-SPECIFIC STYLES ===== */

/* Android Dialog Adaptations */
.platform-android .android-dialog {
    /* Android Material Design inspired */
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

/* Android Input Fields */
.platform-android .android-input {
    /* Android-style inputs */
    font-size: 14px;
    border-radius: 4px;
    border: 1px solid #e0e0e0;
    background-color: #fafafa;
}

.platform-android .android-input:focus {
    border-color: #2196f3;
    background-color: #ffffff;
    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);
}

/* Android Button Styles */
.platform-android .android-dialog button,
.platform-android .android-dialog .settings-btn {
    /* Material Design buttons */
    border-radius: 4px;
    text-transform: uppercase;
    font-weight: 500;
    letter-spacing: 0.5px;
    transition: all 0.2s ease;
}

.platform-android .android-dialog button:hover,
.platform-android .android-dialog .settings-btn:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Android Context Menus */
.platform-android .base-context-menu {
    border-radius: 8px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

/* ===== TOUCH OPTIMIZATIONS ===== */

/* Touch-optimized elements */
.touch-optimized {
    /* Ensure minimum touch target size */
    min-height: 44px;
    min-width: 44px;
    padding: 12px 16px;
}

/* Touch-optimized buttons */
.touch-optimized button,
.touch-optimized .settings-btn {
    min-height: 44px;
    padding: 12px 20px;
    font-size: 16px;
    border-radius: 8px;
}

/* Touch-optimized inputs */
.touch-optimized input,
.touch-optimized textarea,
.touch-optimized select {
    min-height: 44px;
    padding: 12px 16px;
    font-size: 16px;
    border-radius: 8px;
}

/* ===== SCREEN SIZE ADAPTATIONS ===== */

/* Small screens (phones) */
.screen-small .mobile-adapted {
    max-width: calc(100vw - 0.5rem) !important;
    width: calc(100vw - 0.5rem) !important;
    margin: 0.25rem !important;
    border-radius: 8px;
}

.screen-small .mobile-adapted .settings-footer {
    flex-direction: column !important;
    gap: 0.5rem !important;
}

.screen-small .mobile-adapted .settings-footer button {
    width: 100% !important;
    min-height: 48px !important;
}

/* Medium screens (tablets) */
.screen-medium .mobile-adapted {
    max-width: calc(100vw - 1rem) !important;
    width: calc(100vw - 1rem) !important;
    margin: 0.5rem !important;
    border-radius: 12px;
}

/* Large screens (desktop) */
.screen-large .mobile-adapted {
    max-width: 90vw !important;
    width: auto !important;
    margin: 1rem !important;
}

/* ===== ORIENTATION-SPECIFIC STYLES ===== */

/* Portrait orientation */
.orientation-portrait .mobile-adapted {
    max-height: calc(100vh - 2rem) !important;
}

.orientation-portrait .mobile-adapted .settings-content-area {
    flex-direction: column !important;
}

.orientation-portrait .mobile-adapted .settings-nav {
    display: none !important;
}

/* Landscape orientation */
.orientation-landscape .mobile-adapted {
    max-height: calc(100vh - 1rem) !important;
}

.orientation-landscape .mobile-adapted .settings-content-area {
    flex-direction: row !important;
}

.orientation-landscape .mobile-adapted .settings-nav {
    display: flex !important;
    flex-direction: column !important;
    width: 200px !important;
}

/* ===== HIGH DPI DISPLAYS ===== */

/* Retina displays */
.retina-display .mobile-adapted {
    border-width: 0.5px;
}

.retina-display .mobile-adapted button,
.retina-display .mobile-adapted .settings-btn {
    font-weight: 500;
}

/* Very high DPI displays */
.high-dpi .mobile-adapted {
    border-width: 0.5px;
}

.high-dpi .mobile-adapted button,
.high-dpi .mobile-adapted .settings-btn {
    font-size: 14px;
    padding: 10px 16px;
}

/* ===== PLATFORM-SPECIFIC DIALOG OVERRIDES ===== */

/* iOS Dialog Overrides */
.platform-ios #universal-dialog-overlay,
.platform-ios #actor-properties-overlay,
.platform-ios #settings-overlay {
    padding: env(safe-area-inset-top, 1rem) env(safe-area-inset-right, 1rem) 
              env(safe-area-inset-bottom, 1rem) env(safe-area-inset-left, 1rem);
}

.platform-ios .settings-panel-container,
.platform-ios #universal-dialog {
    border-radius: 12px;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
}

/* Android Dialog Overrides */
.platform-android #universal-dialog-overlay,
.platform-android #actor-properties-overlay,
.platform-android #settings-overlay {
    padding: 0.5rem;
}

.platform-android .settings-panel-container,
.platform-android #universal-dialog {
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

/* ===== ACCESSIBILITY IMPROVEMENTS ===== */

/* High contrast mode */
@media (prefers-contrast: high) {
    .platform-ios .ios-dialog,
    .platform-android .android-dialog {
        border: 2px solid #ffffff;
        background: #000000;
        color: #ffffff;
    }
    
    .platform-ios .ios-dialog button,
    .platform-android .android-dialog button {
        border: 1px solid #ffffff;
    }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    .platform-ios .ios-dialog,
    .platform-android .android-dialog,
    .touch-optimized {
        transition: none !important;
        animation: none !important;
    }
}

/* ===== PLATFORM-SPECIFIC UTILITY CLASSES ===== */

/* iOS Utility Classes */
.ios-safe-area {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
}

.ios-no-zoom {
    font-size: 16px !important;
}

.ios-blur {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
}

/* Android Utility Classes */
.android-material {
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.android-elevation-2 {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.android-elevation-4 {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

/* ===== RESPONSIVE PLATFORM STYLES ===== */

/* Mobile-first responsive design */
@media screen and (max-width: 480px) {
    .platform-ios .mobile-adapted,
    .platform-android .mobile-adapted {
        max-width: calc(100vw - 0.5rem) !important;
        width: calc(100vw - 0.5rem) !important;
        margin: 0.25rem !important;
    }
}

@media screen and (max-width: 768px) {
    .platform-ios .mobile-adapted,
    .platform-android .mobile-adapted {
        max-width: calc(100vw - 1rem) !important;
        width: calc(100vw - 1rem) !important;
        margin: 0.5rem !important;
    }
}

/* ===== PLATFORM-SPECIFIC ANIMATIONS ===== */

/* iOS-style animations */
.platform-ios .ios-dialog {
    animation: iosSlideIn 0.3s ease-out;
}

@keyframes iosSlideIn {
    from {
        opacity: 0;
        transform: scale(0.9) translateY(20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Android-style animations */
.platform-android .android-dialog {
    animation: androidSlideIn 0.2s ease-out;
}

@keyframes androidSlideIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}
