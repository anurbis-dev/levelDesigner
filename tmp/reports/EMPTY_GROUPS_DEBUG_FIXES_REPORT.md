# –û—Ç—á—ë—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –ø—É—Å—Ç—ã—Ö –≥—Ä—É–ø–ø

**–î–∞—Ç–∞:** $(Get-Date -Format "dd.MM.yyyy HH:mm")  
**–í–µ—Ä—Å–∏—è:** 2.2.0  
**Status:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã + –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ ‚úÖ

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ –ø—É—Å—Ç—ã–µ –≥—Ä—É–ø–ø—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –í–´–ü–û–õ–ù–ï–ù–ê

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã:

1. ‚úÖ **–õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–ª–∏—á–∏—è –¥–µ—Ç–µ–π –≤ –≥—Ä—É–ø–ø–∞—Ö**
2. ‚úÖ **–í—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤** 
3. ‚úÖ **–í—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –≥—Ä—É–ø–ø—ã**
4. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**

## üêõ –ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å `children === undefined`

**–ü—Ä–æ–±–ª–µ–º–∞**: –ï—Å–ª–∏ `targetGroup.children` –±—ã–ª `undefined` –∏–ª–∏ `null`, –ø—Ä–æ–≤–µ—Ä–∫–∞ `targetGroup.children.length > 0` –º–æ–≥–ª–∞ –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: 
```javascript
// –ë—ã–ª–æ:
if (targetGroup.children && targetGroup.children.length > 0) {
    return false;
}

// –°—Ç–∞–ª–æ:
const childrenArray = targetGroup.children || [];
if (childrenArray.length > 0) {
    return false;
}
```

### 2. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –≥—Ä—É–ø–ø

**–ü—Ä–æ–±–ª–µ–º–∞**: –í `ObjectOperations.js` –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ –≥—Ä—É–ø–ø, —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ `removeFromGroups(obj.children)` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –ü–û–°–õ–ï —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–µ—Ç–µ–π. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —Ç–æ–º—É, —á—Ç–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```javascript
// –ë—ã–ª–æ:
const hadChildren = obj.children.some(child => idsToDelete.has(child.id));
obj.children = obj.children.filter(child => !idsToDelete.has(child.id));
removeFromGroups(obj.children); // ‚ùå –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —É–∂–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤!

// –°—Ç–∞–ª–æ:  
const hadChildren = obj.children.some(child => idsToDelete.has(child.id));
removeFromGroups(obj.children); // ‚úÖ –°–Ω–∞—á–∞–ª–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–µ—Ç–µ–π
obj.children = obj.children.filter(child => !idsToDelete.has(child.id)); // –ü–æ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä—É–µ–º
```

**–í–ª–∏—è–Ω–∏–µ**: –≠—Ç–∞ –æ—à–∏–±–∫–∞ –º–æ–≥–ª–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ —Ç–æ–º—É, —á—Ç–æ –≥—Ä—É–ø–ø—ã –≤–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö –Ω–µ –ø–æ–º–µ—á–∞–ª–∏—Å—å –∫–∞–∫ "–∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ" –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤.

## üî¨ –î–û–ë–ê–í–õ–ï–ù–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ –≤ `GroupOperations.removeEmptyGroup()`:

```javascript
console.log(`[EMPTY GROUPS DEBUG] üîç Checking group for removal:`, {
    group: targetGroup?.name || 'Unknown',
    id: targetGroup?.id,
    type: targetGroup?.type, 
    hasChildren: targetGroup?.children ? targetGroup.children.length : 'undefined',
    children: targetGroup?.children
});
```

### –õ–æ–≥–∏ –≤—ã–∑–æ–≤–æ–≤ –≤ –∫–∞–∂–¥–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Ç–æ—á–∫–µ:

1. **MouseHandlers.js** - –ø—Ä–∏ drag & drop:
   ```javascript
   console.log(`[MOUSE HANDLERS DEBUG] üñ±Ô∏è Object dragged out of group: ${group.name}`);
   ```

2. **ObjectOperations.js** - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤:
   ```javascript
   console.log(`[OBJECT OPERATIONS DEBUG] üîç Checking ${affectedGroups.size} affected groups`);
   ```

3. **GroupOperations.js** - –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ä–µ–∂–∏–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
   ```javascript
   console.log(`[GROUP EDIT DEBUG] üö™ Closing group edit mode for: ${group.name}`);
   ```

## üéØ –°–¶–ï–ù–ê–†–ò–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

–¢–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

### –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤:
1. `[OBJECT OPERATIONS DEBUG]` - —Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø –∑–∞—Ç—Ä–æ–Ω—É—Ç–æ
2. `[EMPTY GROUPS DEBUG]` - –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã
3. –†–µ–∑—É–ª—å—Ç–∞—Ç —É–¥–∞–ª–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã

### –ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤:
1. `[MOUSE HANDLERS DEBUG]` - —Ñ–∞–∫—Ç drag & drop
2. `[EMPTY GROUPS DEBUG]` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø—ã –Ω–∞ –ø—É—Å—Ç–æ—Ç—É
3. –†–µ–∑—É–ª—å—Ç–∞—Ç —É–¥–∞–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã

### –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ä–µ–∂–∏–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. `[GROUP EDIT DEBUG]` - —Ñ–∞–∫—Ç –∑–∞–∫—Ä—ã—Ç–∏—è —Ä–µ–∂–∏–º–∞
2. `[EMPTY GROUPS DEBUG]` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø—ã –Ω–∞ –ø—É—Å—Ç–æ—Ç—É  
3. –†–µ–∑—É–ª—å—Ç–∞—Ç —É–¥–∞–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã

## üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –î–ò–ê–ì–ù–û–°–¢–ò–ö–ï

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—É—é –≥—Ä—É–ø–ø—É:
   - –£–¥–∞–ª–∏—Ç–µ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑ –≥—Ä—É–ø–ø—ã (Delete/X)
   - –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑ –≥—Ä—É–ø–ø—ã –Ω–∞—Ä—É–∂—É
   - –ó–∞–∫—Ä–æ–π—Ç–µ —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—É—Å—Ç–æ–π –≥—Ä—É–ø–ø—ã (Esc)
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ - –æ–Ω–∏ –ø–æ–∫–∞–∂—É—Ç:
   - –ë—ã–ª–∞ –ª–∏ –≥—Ä—É–ø–ø–∞ –Ω–∞–π–¥–µ–Ω–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –°–∫–æ–ª—å–∫–æ –¥–µ—Ç–µ–π –≤ –≥—Ä—É–ø–ø–µ
   - –ë—ã–ª–∞ –ª–∏ –≥—Ä—É–ø–ø–∞ –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è
   - –ë—ã–ª –ª–∏ –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç –ø—Ä–æ—Ü–µ—Å—Å —É–¥–∞–ª–µ–Ω–∏—è
   - –†–µ–∑—É–ª—å—Ç–∞—Ç —É–¥–∞–ª–µ–Ω–∏—è

## üìÅ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

```
src/core/GroupOperations.js    - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è + –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏
src/core/ObjectOperations.js   - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫—É—Ä—Å–∏–∏ + –ª–æ–≥–∏
src/core/MouseHandlers.js      - –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏
```

## ‚ö° –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –≤–Ω–µ—Å—ë–Ω–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞** –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø
2. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç undefined** –¥–ª—è –º–∞—Å—Å–∏–≤–∞ children  
3. ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É, –µ—Å–ª–∏ –≥—Ä—É–ø–ø—ã –≤—Å—ë –µ—â—ë –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è
4. ‚úÖ **–õ–æ–≥–∏ –ø–æ–º–æ–≥—É—Ç** –≤—ã—è–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å

## üîÑ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å –Ω–æ–≤—ã–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
2. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏** –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø—Ä–æ–±–ª–µ–º
3. **–£–±—Ä–∞—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏** –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã
4. **–°–æ–∑–¥–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç** –æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

---

*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—É—Å—Ç—ã—Ö –≥—Ä—É–ø–ø.*
