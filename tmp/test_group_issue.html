<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Group Issue</title>
</head>
<body>
    <h1>Test Group Issue</h1>
    <div id="output"></div>

    <script type="module">
        import { Level } from '../src/models/Level.js';
        import { Asset } from '../src/models/Asset.js';

        const output = document.getElementById('output');

        function log(message) {
            console.log(message);
            output.innerHTML += `<div>${message}</div>`;
        }

        log('ðŸ§ª Testing group counting issue...');

        // Create level
        const level = new Level();

        // Check initial state
        const mainLayerId = level.getMainLayerId();
        log(`Main layer ID: ${mainLayerId}`);

        // Create group directly
        const group = {
            name: 'Test Group',
            type: 'group',
            x: 100,
            y: 100,
            visible: true,
            locked: false,
            layerId: mainLayerId,
            children: []
        };

        log(`Group layerId: ${group.layerId}`);
        log(`Type check: ${typeof group.layerId} vs ${typeof mainLayerId}`);
        log(`Equality check: ${group.layerId === mainLayerId}`);

        // Add group
        level.addObject(group);
        log(`Added group with ID: ${group.id}`);

        // Check count
        const count = level.getLayerObjectsCount(mainLayerId);
        log(`Count for Main layer: ${count}`);

        // Check all objects
        log('All objects in level:');
        level.objects.forEach((obj, i) => {
            log(`  ${i}: ${obj.name} (${obj.type}) - layerId: ${obj.layerId}`);
        });

        // Test with multiple groups
        log('\nðŸ”„ Adding another group...');
        const group2 = {
            name: 'Another Group',
            type: 'group',
            x: 200,
            y: 200,
            visible: true,
            locked: false,
            layerId: mainLayerId,
            children: []
        };

        level.addObject(group2);
        const count2 = level.getLayerObjectsCount(mainLayerId);
        log(`Count after adding second group: ${count2}`);

        log('\nðŸŽ‰ Test completed!');
    </script>
</body>
</html>
